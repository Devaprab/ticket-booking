{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data: () => ({\n    otp: '',\n    resendTimeout: null,\n    resendCountdown: 30,\n    error: '',\n    color: 'green',\n    snackbar: false,\n    buttonDisabled: false,\n    timeout: 3000,\n    message: 'New OTP sent to your mobile number !!'\n  }),\n  computed: {\n    mobile() {\n      return this.$store.getters.getMobile;\n    },\n    isOtpComplete() {\n      // Check if OTP input is complete\n      return this.otp.length === 6;\n    }\n  },\n  methods: {\n    async verifyOtp() {\n      try {\n        this.buttonDisabled = true;\n        const success = await this.$store.dispatch('verifyOtp', {\n          otp: this.otp,\n          mobile: this.mobile\n        });\n        if (success) {\n          this.buttonDisabled = false;\n          this.$router.push('/booking-page');\n        }\n      } catch (error) {\n        console.error(error);\n        this.buttonDisabled = false;\n        this.message = error;\n        this.color = 'red';\n        this.snackbar = true;\n      }\n    },\n    async resendOtp() {\n      try {\n        this.buttonDisabled = true;\n        const response = await this.$store.dispatch('generateOtp', this.mobile);\n        if (response) {\n          this.buttonDisabled = false;\n          this.snackbar = true;\n        }\n      } catch (error) {\n        this.buttonDisabled = false;\n        this.error = error;\n      }\n    },\n    startResendTimer() {\n      this.resendTimeout = setInterval(() => {\n        if (this.resendCountdown > 0) {\n          this.resendCountdown -= 1;\n        } else {\n          clearInterval(this.resendTimeout);\n        }\n      }, 1000);\n    }\n  },\n  mounted() {\n    this.startResendTimer();\n  }\n};","map":{"version":3,"names":["data","otp","resendTimeout","resendCountdown","error","color","snackbar","buttonDisabled","timeout","message","computed","mobile","$store","getters","getMobile","isOtpComplete","length","methods","verifyOtp","success","dispatch","$router","push","console","resendOtp","response","startResendTimer","setInterval","clearInterval","mounted"],"sources":["D:\\Documents\\ticket-booking\\Museum-completed\\src\\components\\OtpPage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h3 class=\"text-h6 mb-4\">Verify OTP</h3>\r\n    <div class=\"text-body-2 font-weight-light text-start\">\r\n      Enter the code we just sent to your mobile phone <br>\r\n      <span class=\"font-weight-black\">{{ mobile }}</span>\r\n      <span class=\"ms-3\">(</span>\r\n      <router-link to=\"/\" class=\" text-decoration-none\"><b>change </b></router-link>)\r\n    </div>\r\n    <v-sheet color=\"surface\">\r\n      <v-otp-input v-model=\"otp\" variant=\"solo-filled\" length=\"6\"></v-otp-input>\r\n    </v-sheet>\r\n    <v-btn class=\"my-4\" color=\"green-darken-4\" height=\"40\" text=\"Verify\" block\r\n      :disabled=\"!isOtpComplete || buttonDisabled\" :loading=\"buttonDisabled\" @click=\"verifyOtp\"></v-btn>\r\n    <div class=\"text-caption\">\r\n      Didn't receive the code?\r\n      <div class=\"text-caption\" v-if=\"resendCountdown > 0\">\r\n        Resend in {{ resendCountdown }} seconds\r\n      </div>\r\n      <div v-else>\r\n        <a href=\"#\" @click.prevent=\"resendOtp\" class=\"text-caption\">\r\n          Resend\r\n        </a>\r\n      </div>\r\n    </div>\r\n    <v-snackbar v-model=\"snackbar\" :color=\"color\" :timeout=\"timeout\" location=\"top\">\r\n      <p class=\"text-center fw-bold \">{{ message }}</p>\r\n    </v-snackbar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data: () => ({\r\n    otp: '',\r\n    resendTimeout: null,\r\n    resendCountdown: 30,\r\n    error: '',\r\n    color: 'green',\r\n    snackbar: false,\r\n    buttonDisabled: false,\r\n    timeout: 3000, \r\n    message: 'New OTP sent to your mobile number !!'\r\n  }),\r\n  computed: {\r\n    mobile() {\r\n      return this.$store.getters.getMobile;\r\n    },\r\n    isOtpComplete() {\r\n      // Check if OTP input is complete\r\n      return this.otp.length === 6;\r\n    }\r\n  },\r\n  methods: {\r\n    async verifyOtp() {\r\n      try {\r\n        this.buttonDisabled = true;\r\n        const success = await this.$store.dispatch('verifyOtp', {\r\n          otp: this.otp,\r\n          mobile: this.mobile\r\n        });\r\n        if (success) {\r\n          this.buttonDisabled = false;\r\n          this.$router.push('/booking-page')\r\n        }\r\n      }\r\n      catch (error) {\r\n        console.error(error)\r\n        this.buttonDisabled = false;\r\n        this.message = error;\r\n        this.color= 'red'\r\n        this.snackbar = true; \r\n      }\r\n    },\r\n    async resendOtp() {\r\n      try {\r\n        this.buttonDisabled = true;\r\n        const response = await this.$store.dispatch('generateOtp', this.mobile);\r\n        if (response) {\r\n          this.buttonDisabled = false;\r\n          this.snackbar = true\r\n        }\r\n      }\r\n      catch (error) {\r\n        this.buttonDisabled = false;\r\n        this.error = error;\r\n      }\r\n    },\r\n    startResendTimer() {\r\n      this.resendTimeout = setInterval(() => {\r\n        if (this.resendCountdown > 0) {\r\n          this.resendCountdown -= 1;\r\n        } else {\r\n          clearInterval(this.resendTimeout);\r\n        }\r\n      }, 1000);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.startResendTimer();\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n"],"mappings":";AAgCA,eAAe;EACbA,IAAI,EAAEA,CAAA,MAAO;IACXC,GAAG,EAAE,EAAE;IACPC,aAAa,EAAE,IAAI;IACnBC,eAAe,EAAE,EAAE;IACnBC,KAAK,EAAE,EAAE;IACTC,KAAK,EAAE,OAAO;IACdC,QAAQ,EAAE,KAAK;IACfC,cAAc,EAAE,KAAK;IACrBC,OAAO,EAAE,IAAI;IACbC,OAAO,EAAE;EACX,CAAC,CAAC;EACFC,QAAQ,EAAE;IACRC,MAAMA,CAAA,EAAG;MACP,OAAO,IAAI,CAACC,MAAM,CAACC,OAAO,CAACC,SAAS;IACtC,CAAC;IACDC,aAAaA,CAAA,EAAG;MACd;MACA,OAAO,IAAI,CAACd,GAAG,CAACe,MAAK,KAAM,CAAC;IAC9B;EACF,CAAC;EACDC,OAAO,EAAE;IACP,MAAMC,SAASA,CAAA,EAAG;MAChB,IAAI;QACF,IAAI,CAACX,cAAa,GAAI,IAAI;QAC1B,MAAMY,OAAM,GAAI,MAAM,IAAI,CAACP,MAAM,CAACQ,QAAQ,CAAC,WAAW,EAAE;UACtDnB,GAAG,EAAE,IAAI,CAACA,GAAG;UACbU,MAAM,EAAE,IAAI,CAACA;QACf,CAAC,CAAC;QACF,IAAIQ,OAAO,EAAE;UACX,IAAI,CAACZ,cAAa,GAAI,KAAK;UAC3B,IAAI,CAACc,OAAO,CAACC,IAAI,CAAC,eAAe;QACnC;MACF,EACA,OAAOlB,KAAK,EAAE;QACZmB,OAAO,CAACnB,KAAK,CAACA,KAAK;QACnB,IAAI,CAACG,cAAa,GAAI,KAAK;QAC3B,IAAI,CAACE,OAAM,GAAIL,KAAK;QACpB,IAAI,CAACC,KAAK,GAAE,KAAI;QAChB,IAAI,CAACC,QAAO,GAAI,IAAI;MACtB;IACF,CAAC;IACD,MAAMkB,SAASA,CAAA,EAAG;MAChB,IAAI;QACF,IAAI,CAACjB,cAAa,GAAI,IAAI;QAC1B,MAAMkB,QAAO,GAAI,MAAM,IAAI,CAACb,MAAM,CAACQ,QAAQ,CAAC,aAAa,EAAE,IAAI,CAACT,MAAM,CAAC;QACvE,IAAIc,QAAQ,EAAE;UACZ,IAAI,CAAClB,cAAa,GAAI,KAAK;UAC3B,IAAI,CAACD,QAAO,GAAI,IAAG;QACrB;MACF,EACA,OAAOF,KAAK,EAAE;QACZ,IAAI,CAACG,cAAa,GAAI,KAAK;QAC3B,IAAI,CAACH,KAAI,GAAIA,KAAK;MACpB;IACF,CAAC;IACDsB,gBAAgBA,CAAA,EAAG;MACjB,IAAI,CAACxB,aAAY,GAAIyB,WAAW,CAAC,MAAM;QACrC,IAAI,IAAI,CAACxB,eAAc,GAAI,CAAC,EAAE;UAC5B,IAAI,CAACA,eAAc,IAAK,CAAC;QAC3B,OAAO;UACLyB,aAAa,CAAC,IAAI,CAAC1B,aAAa,CAAC;QACnC;MACF,CAAC,EAAE,IAAI,CAAC;IACV;EACF,CAAC;EACD2B,OAAOA,CAAA,EAAG;IACR,IAAI,CAACH,gBAAgB,CAAC,CAAC;EACzB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}