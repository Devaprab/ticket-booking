{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers } from \"vue\";\nconst _hoisted_1 = /*#__PURE__*/_createElementVNode(\"h3\", {\n  class: \"text-h6 mb-4\"\n}, \"Verify OTP\", -1 /* HOISTED */);\nconst _hoisted_2 = {\n  class: \"text-body-2 font-weight-light text-start\"\n};\nconst _hoisted_3 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1 /* HOISTED */);\nconst _hoisted_4 = {\n  class: \"font-weight-black\"\n};\nconst _hoisted_5 = /*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"ms-3\"\n}, \"(\", -1 /* HOISTED */);\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"b\", null, \"change \", -1 /* HOISTED */);\nconst _hoisted_7 = {\n  class: \"text-caption\"\n};\nconst _hoisted_8 = {\n  key: 0,\n  class: \"text-caption\"\n};\nconst _hoisted_9 = {\n  key: 1\n};\nconst _hoisted_10 = {\n  class: \"text-center fw-bold\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_v_otp_input = _resolveComponent(\"v-otp-input\");\n  const _component_v_sheet = _resolveComponent(\"v-sheet\");\n  const _component_v_btn = _resolveComponent(\"v-btn\");\n  const _component_v_snackbar = _resolveComponent(\"v-snackbar\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [_createTextVNode(\" Enter the code we just sent to your mobile phone \"), _hoisted_3, _createElementVNode(\"span\", _hoisted_4, _toDisplayString($options.mobile), 1 /* TEXT */), _hoisted_5, _createVNode(_component_router_link, {\n    to: \"/\",\n    class: \"text-decoration-none\"\n  }, {\n    default: _withCtx(() => [_hoisted_6]),\n    _: 1 /* STABLE */\n  }), _createTextVNode(\") \")]), _createVNode(_component_v_sheet, {\n    color: \"surface\"\n  }, {\n    default: _withCtx(() => [_createVNode(_component_v_otp_input, {\n      modelValue: _ctx.otp,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.otp = $event),\n      variant: \"solo-filled\",\n      length: \"6\"\n    }, null, 8 /* PROPS */, [\"modelValue\"])]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_v_btn, {\n    class: \"my-4\",\n    color: \"green-darken-4\",\n    height: \"40\",\n    text: \"Verify\",\n    block: \"\",\n    disabled: !$options.isOtpComplete || _ctx.buttonDisabled,\n    loading: _ctx.buttonDisabled,\n    onClick: $options.verifyOtp\n  }, null, 8 /* PROPS */, [\"disabled\", \"loading\", \"onClick\"]), _createElementVNode(\"div\", _hoisted_7, [_createTextVNode(\" Didn't receive the code? \"), _ctx.resendCountdown > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, \" Resend in \" + _toDisplayString(_ctx.resendCountdown) + \" seconds \", 1 /* TEXT */)) : (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"a\", {\n    href: \"#\",\n    onClick: _cache[1] || (_cache[1] = _withModifiers((...args) => $options.resendOtp && $options.resendOtp(...args), [\"prevent\"])),\n    class: \"text-caption\"\n  }, \" Resend \")]))]), _createVNode(_component_v_snackbar, {\n    modelValue: _ctx.snackbar,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => _ctx.snackbar = $event),\n    color: _ctx.color,\n    timeout: _ctx.timeout,\n    location: \"top\"\n  }, {\n    default: _withCtx(() => [_createElementVNode(\"p\", _hoisted_10, _toDisplayString(_ctx.message), 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"modelValue\", \"color\", \"timeout\"])]);\n}","map":{"version":3,"names":["_createElementVNode","class","key","_createElementBlock","_hoisted_1","_hoisted_2","_createTextVNode","_hoisted_3","_hoisted_4","_toDisplayString","$options","mobile","_hoisted_5","_createVNode","_component_router_link","to","default","_withCtx","_hoisted_6","_","_component_v_sheet","color","_component_v_otp_input","modelValue","_ctx","otp","_cache","$event","variant","length","_component_v_btn","height","text","block","disabled","isOtpComplete","buttonDisabled","loading","onClick","verifyOtp","_hoisted_7","resendCountdown","_hoisted_8","_hoisted_9","href","_withModifiers","args","resendOtp","_component_v_snackbar","snackbar","timeout","location","_hoisted_10","message"],"sources":["D:\\Documents\\ticket-booking\\Museum-completed\\src\\components\\OtpPage.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h3 class=\"text-h6 mb-4\">Verify OTP</h3>\r\n    <div class=\"text-body-2 font-weight-light text-start\">\r\n      Enter the code we just sent to your mobile phone <br>\r\n      <span class=\"font-weight-black\">{{ mobile }}</span>\r\n      <span class=\"ms-3\">(</span>\r\n      <router-link to=\"/\" class=\" text-decoration-none\"><b>change </b></router-link>)\r\n    </div>\r\n    <v-sheet color=\"surface\">\r\n      <v-otp-input v-model=\"otp\" variant=\"solo-filled\" length=\"6\"></v-otp-input>\r\n    </v-sheet>\r\n    <v-btn class=\"my-4\" color=\"green-darken-4\" height=\"40\" text=\"Verify\" block\r\n      :disabled=\"!isOtpComplete || buttonDisabled\" :loading=\"buttonDisabled\" @click=\"verifyOtp\"></v-btn>\r\n    <div class=\"text-caption\">\r\n      Didn't receive the code?\r\n      <div class=\"text-caption\" v-if=\"resendCountdown > 0\">\r\n        Resend in {{ resendCountdown }} seconds\r\n      </div>\r\n      <div v-else>\r\n        <a href=\"#\" @click.prevent=\"resendOtp\" class=\"text-caption\">\r\n          Resend\r\n        </a>\r\n      </div>\r\n    </div>\r\n    <v-snackbar v-model=\"snackbar\" :color=\"color\" :timeout=\"timeout\" location=\"top\">\r\n      <p class=\"text-center fw-bold \">{{ message }}</p>\r\n    </v-snackbar>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data: () => ({\r\n    otp: '',\r\n    resendTimeout: null,\r\n    resendCountdown: 30,\r\n    error: '',\r\n    color: 'green',\r\n    snackbar: false,\r\n    buttonDisabled: false,\r\n    timeout: 3000, \r\n    message: 'New OTP sent to your mobile number !!'\r\n  }),\r\n  computed: {\r\n    mobile() {\r\n      return this.$store.getters.getMobile;\r\n    },\r\n    isOtpComplete() {\r\n      // Check if OTP input is complete\r\n      return this.otp.length === 6;\r\n    }\r\n  },\r\n  methods: {\r\n    async verifyOtp() {\r\n      try {\r\n        this.buttonDisabled = true;\r\n        const success = await this.$store.dispatch('verifyOtp', {\r\n          otp: this.otp,\r\n          mobile: this.mobile\r\n        });\r\n        if (success) {\r\n          this.buttonDisabled = false;\r\n          this.$router.push('/booking-page')\r\n        }\r\n      }\r\n      catch (error) {\r\n        console.error(error)\r\n        this.buttonDisabled = false;\r\n        this.message = error;\r\n        this.color= 'red'\r\n        this.snackbar = true; \r\n      }\r\n    },\r\n    async resendOtp() {\r\n      try {\r\n        this.buttonDisabled = true;\r\n        const response = await this.$store.dispatch('generateOtp', this.mobile);\r\n        if (response) {\r\n          this.buttonDisabled = false;\r\n          this.snackbar = true\r\n        }\r\n      }\r\n      catch (error) {\r\n        this.buttonDisabled = false;\r\n        this.error = error;\r\n      }\r\n    },\r\n    startResendTimer() {\r\n      this.resendTimeout = setInterval(() => {\r\n        if (this.resendCountdown > 0) {\r\n          this.resendCountdown -= 1;\r\n        } else {\r\n          clearInterval(this.resendTimeout);\r\n        }\r\n      }, 1000);\r\n    },\r\n  },\r\n  mounted() {\r\n    this.startResendTimer();\r\n  },\r\n};\r\n</script>\r\n\r\n\r\n"],"mappings":";gCAEIA,mBAAA,CAAwC;EAApCC,KAAK,EAAC;AAAc,GAAC,YAAU;;EAC9BA,KAAK,EAAC;AAA0C;gCACFD,mBAAA,CAAI;;EAC/CC,KAAK,EAAC;AAAmB;gCAC/BD,mBAAA,CAA2B;EAArBC,KAAK,EAAC;AAAM,GAAC,GAAC;gCAC8BD,mBAAA,CAAc,WAAX,SAAO;;EAOzDC,KAAK,EAAC;AAAc;;EAd7BC,GAAA;EAgBWD,KAAK,EAAC;;;EAhBjBC,GAAA;AAAA;;EA0BSD,KAAK,EAAC;AAAsB;;;;;;;uBAzBnCE,mBAAA,CA2BM,cA1BJC,UAAwC,EACxCJ,mBAAA,CAKM,OALNK,UAKM,GARVC,gBAAA,CAG0D,oDACH,GAAAC,UAAI,EACrDP,mBAAA,CAAmD,QAAnDQ,UAAmD,EAAAC,gBAAA,CAAhBC,QAAA,CAAAC,MAAM,kBACzCC,UAA2B,EAC3BC,YAAA,CAA8EC,sBAAA;IAAjEC,EAAE,EAAC,GAAG;IAACd,KAAK,EAAC;;IAPhCe,OAAA,EAAAC,QAAA,CAOwD,MAAc,CAAdC,UAAc,C;IAPtEC,CAAA;MAAAb,gBAAA,CAOoF,IAChF,E,GACAO,YAAA,CAEUO,kBAAA;IAFDC,KAAK,EAAC;EAAS;IAT5BL,OAAA,EAAAC,QAAA,CAUM,MAA0E,CAA1EJ,YAAA,CAA0ES,sBAAA;MAVhFC,UAAA,EAU4BC,IAAA,CAAAC,GAAG;MAV/B,uBAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAU4BH,IAAA,CAAAC,GAAG,GAAAE,MAAA;MAAEC,OAAO,EAAC,aAAa;MAACC,MAAM,EAAC;;IAV9DV,CAAA;MAYIN,YAAA,CACoGiB,gBAAA;IAD7F7B,KAAK,EAAC,MAAM;IAACoB,KAAK,EAAC,gBAAgB;IAACU,MAAM,EAAC,IAAI;IAACC,IAAI,EAAC,QAAQ;IAACC,KAAK,EAAL,EAAK;IACvEC,QAAQ,GAAGxB,QAAA,CAAAyB,aAAa,IAAIX,IAAA,CAAAY,cAAc;IAAGC,OAAO,EAAEb,IAAA,CAAAY,cAAc;IAAGE,OAAK,EAAE5B,QAAA,CAAA6B;+DACjFvC,mBAAA,CAUM,OAVNwC,UAUM,GAxBVlC,gBAAA,CAc8B,4BAExB,GAAgCkB,IAAA,CAAAiB,eAAe,Q,cAA/CtC,mBAAA,CAEM,OAFNuC,UAEM,EAF+C,aACzC,GAAAjC,gBAAA,CAAGe,IAAA,CAAAiB,eAAe,IAAG,WACjC,oB,cACAtC,mBAAA,CAIM,OAvBZwC,UAAA,GAoBQ3C,mBAAA,CAEI;IAFD4C,IAAI,EAAC,GAAG;IAAEN,OAAK,EAAAZ,MAAA,QAAAA,MAAA,MApB1BmB,cAAA,KAAAC,IAAA,KAoBoCpC,QAAA,CAAAqC,SAAA,IAAArC,QAAA,CAAAqC,SAAA,IAAAD,IAAA,CAAS;IAAE7C,KAAK,EAAC;KAAe,UAE5D,E,MAGJY,YAAA,CAEamC,qBAAA;IA3BjBzB,UAAA,EAyByBC,IAAA,CAAAyB,QAAQ;IAzBjC,uBAAAvB,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAyByBH,IAAA,CAAAyB,QAAQ,GAAAtB,MAAA;IAAGN,KAAK,EAAEG,IAAA,CAAAH,KAAK;IAAG6B,OAAO,EAAE1B,IAAA,CAAA0B,OAAO;IAAEC,QAAQ,EAAC;;IAzB9EnC,OAAA,EAAAC,QAAA,CA0BM,MAAiD,CAAjDjB,mBAAA,CAAiD,KAAjDoD,WAAiD,EAAA3C,gBAAA,CAAde,IAAA,CAAA6B,OAAO,iB;IA1BhDlC,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}