{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  data() {\n    return {\n      mobile: null,\n      snackbar: false,\n      color: '',\n      message: 'info',\n      mobRules: [value => {\n        if (value) return true;\n        return 'Mobile is required.';\n      }, value => {\n        if (/^\\d+$/.test(value)) return true;\n        return 'Only digits allowed.';\n      }, value => {\n        if (value?.length === 10 && /^[6-9]\\d{9}$/.test(value)) return true;\n        return 'Enter a valid 10 digit number.';\n      }],\n      isMobileValid: false,\n      buttonDisabled: false\n    };\n  },\n  watch: {\n    mobile(value) {\n      // Check mobile number validity on change\n      this.isMobileValid = this.mobRules.every(rule => rule(value) === true);\n    }\n  },\n  methods: {\n    async validate() {\n      try {\n        const {\n          valid\n        } = await this.$refs.form.validate();\n        if (valid) {\n          try {\n            this.buttonDisabled = true;\n            const success = await this.$store.dispatch('generateOtp', this.mobile);\n            if (success) {\n              this.buttonDisabled = false;\n              this.$router.push('/otp');\n            }\n          } catch (err) {\n            console.error(err);\n            this.message = err.response ? err.response.data.message : err.message;\n            this.color = \"danger\";\n            this.snackbar = true;\n            this.buttonDisabled = false;\n          }\n        }\n      } catch (error) {\n        console.error('Error fetching user details', error);\n        this.buttonDisabled = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["data","mobile","snackbar","color","message","mobRules","value","test","length","isMobileValid","buttonDisabled","watch","every","rule","methods","validate","valid","$refs","form","success","$store","dispatch","$router","push","err","console","error","response"],"sources":["D:\\Documents\\ticket-booking\\Museum-completed\\src\\components\\MobileEnter.vue"],"sourcesContent":["<template>\r\n  <v-snackbar v-model=\"snackbar\" :color=\"color\" location=\"center\" multi-line max-width=\"500\" min-width=\"300\">\r\n    {{ message }}\r\n    <template v-slot:actions>\r\n      <v-btn color=\"black\" variant=\"text\" @click=\"snackbar = false\">\r\n        Close\r\n      </v-btn>\r\n    </template>\r\n  </v-snackbar>\r\n  <p class=\"text-start pt-5\">Please enter a valid mobile number to book tickets.</p>\r\n  <v-form ref=\"form\">\r\n    <v-text-field v-model=\"mobile\" color=\"teritiary\" placeholder=\"Enter your Mobile Number\"\r\n      prepend-inner-icon=\"mdi-cellphone\" variant=\"underlined\" class=\"mb-4\" :rules=\"mobRules\" required></v-text-field>\r\n    <v-btn block height=\"40\" color=\"green-darken-4\" class=\"bg-gradient\" @click=\"validate\"\r\n      :disabled=\"!isMobileValid || buttonDisabled\" :loading=\"buttonDisabled\">Generate OTP</v-btn>\r\n  </v-form>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      mobile: null,\r\n      snackbar: false,\r\n      color: '',\r\n      message: 'info',\r\n      mobRules: [\r\n        value => {\r\n          if (value) return true;\r\n          return 'Mobile is required.';\r\n        },\r\n        value => {\r\n          if (/^\\d+$/.test(value)) return true;\r\n          return 'Only digits allowed.';\r\n        },\r\n        value => {\r\n          if ((value?.length === 10) && (/^[6-9]\\d{9}$/.test(value))) return true;\r\n          return 'Enter a valid 10 digit number.';\r\n        }],\r\n      isMobileValid: false,\r\n      buttonDisabled: false\r\n    }\r\n  },\r\n  watch: {\r\n    mobile(value) {\r\n      // Check mobile number validity on change\r\n      this.isMobileValid = this.mobRules.every(rule => rule(value) === true);\r\n    }\r\n  },\r\n  methods: {\r\n    async validate() {\r\n      try {\r\n        const { valid } = await this.$refs.form.validate()\r\n        if (valid) {\r\n          try {\r\n            this.buttonDisabled = true;\r\n          const success = await this.$store.dispatch('generateOtp', this.mobile);\r\n            if (success) {\r\n              this.buttonDisabled = false;\r\n              \r\n            this.$router.push('/otp');\r\n          }\r\n          }\r\n          catch (err) {\r\n            console.error(err);\r\n            this.message = err.response? err.response.data.message : err.message;\r\n            this.color= \"danger\"\r\n            this.snackbar = true;\r\n            this.buttonDisabled = false;\r\n          }\r\n        }\r\n      }\r\n      catch (error) {\r\n        console.error('Error fetching user details', error);\r\n        this.buttonDisabled = false;\r\n      }\r\n    },\r\n  }\r\n};\r\n</script>"],"mappings":";AAmBA,eAAe;EACbA,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,MAAM,EAAE,IAAI;MACZC,QAAQ,EAAE,KAAK;MACfC,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE,MAAM;MACfC,QAAQ,EAAE,CACRC,KAAI,IAAK;QACP,IAAIA,KAAK,EAAE,OAAO,IAAI;QACtB,OAAO,qBAAqB;MAC9B,CAAC,EACDA,KAAI,IAAK;QACP,IAAI,OAAO,CAACC,IAAI,CAACD,KAAK,CAAC,EAAE,OAAO,IAAI;QACpC,OAAO,sBAAsB;MAC/B,CAAC,EACDA,KAAI,IAAK;QACP,IAAKA,KAAK,EAAEE,MAAK,KAAM,EAAE,IAAM,cAAc,CAACD,IAAI,CAACD,KAAK,CAAE,EAAE,OAAO,IAAI;QACvE,OAAO,gCAAgC;MACzC,CAAC,CAAC;MACJG,aAAa,EAAE,KAAK;MACpBC,cAAc,EAAE;IAClB;EACF,CAAC;EACDC,KAAK,EAAE;IACLV,MAAMA,CAACK,KAAK,EAAE;MACZ;MACA,IAAI,CAACG,aAAY,GAAI,IAAI,CAACJ,QAAQ,CAACO,KAAK,CAACC,IAAG,IAAKA,IAAI,CAACP,KAAK,MAAM,IAAI,CAAC;IACxE;EACF,CAAC;EACDQ,OAAO,EAAE;IACP,MAAMC,QAAQA,CAAA,EAAG;MACf,IAAI;QACF,MAAM;UAAEC;QAAM,IAAI,MAAM,IAAI,CAACC,KAAK,CAACC,IAAI,CAACH,QAAQ,CAAC;QACjD,IAAIC,KAAK,EAAE;UACT,IAAI;YACF,IAAI,CAACN,cAAa,GAAI,IAAI;YAC5B,MAAMS,OAAM,GAAI,MAAM,IAAI,CAACC,MAAM,CAACC,QAAQ,CAAC,aAAa,EAAE,IAAI,CAACpB,MAAM,CAAC;YACpE,IAAIkB,OAAO,EAAE;cACX,IAAI,CAACT,cAAa,GAAI,KAAK;cAE7B,IAAI,CAACY,OAAO,CAACC,IAAI,CAAC,MAAM,CAAC;YAC3B;UACA,EACA,OAAOC,GAAG,EAAE;YACVC,OAAO,CAACC,KAAK,CAACF,GAAG,CAAC;YAClB,IAAI,CAACpB,OAAM,GAAIoB,GAAG,CAACG,QAAQ,GAAEH,GAAG,CAACG,QAAQ,CAAC3B,IAAI,CAACI,OAAM,GAAIoB,GAAG,CAACpB,OAAO;YACpE,IAAI,CAACD,KAAK,GAAE,QAAO;YACnB,IAAI,CAACD,QAAO,GAAI,IAAI;YACpB,IAAI,CAACQ,cAAa,GAAI,KAAK;UAC7B;QACF;MACF,EACA,OAAOgB,KAAK,EAAE;QACZD,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEA,KAAK,CAAC;QACnD,IAAI,CAAChB,cAAa,GAAI,KAAK;MAC7B;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}