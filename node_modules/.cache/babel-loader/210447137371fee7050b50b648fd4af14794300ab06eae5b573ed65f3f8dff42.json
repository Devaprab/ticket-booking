{"ast":null,"code":"import html2pdf from 'html2pdf.js';\nexport default {\n  data() {\n    return {\n      downloading: false,\n      resendTimeout: null,\n      resendCountdown: 5\n    };\n  },\n  methods: {\n    startResendTimer() {\n      const interval = setInterval(() => {\n        if (this.resendCountdown > 0) {\n          this.resendCountdown--;\n        } else {\n          clearInterval(interval);\n          this.download();\n          this.downloading = true;\n        }\n      }, 1000);\n    },\n    download() {\n      const ticketElement = this.$refs.ticket;\n      ticketElement.style.margin = 'auto';\n      ticketElement.style.display = 'block';\n      const options = {\n        margin: 30,\n        filename: `aksharam_${this.userDetails[\"Booking ID\"]}.pdf`,\n        image: {\n          type: 'png',\n          quality: 1\n        },\n        html2canvas: {\n          scale: 2\n        },\n        jsPDF: {\n          format: 'A5',\n          orientation: 'portrait'\n        }\n      };\n      html2pdf().from(ticketElement).set(options).save();\n    },\n    formatTime(time) {\n      const [hours, minutes] = time.split(':');\n      let formattedHours = parseInt(hours, 10) % 12;\n      formattedHours = formattedHours === 0 ? 12 : formattedHours;\n      const formattedTime = `${formattedHours}:${minutes} ${hours < 12 ? 'am' : 'pm'}`;\n      return formattedTime;\n    }\n  },\n  mounted() {\n    this.startResendTimer();\n  },\n  computed: {\n    qrdetails() {\n      return this.$store.getters.getQR || {};\n    },\n    userDetails() {\n      const userDetailsString = this.qrdetails.userDetails || '';\n      const userDetailsArray = userDetailsString.split(', ');\n      const userDetailsObject = {};\n      userDetailsArray.forEach(detail => {\n        if (detail) {\n          const [key, value] = detail.split(': ');\n          userDetailsObject[key.trim()] = isNaN(value) ? value.trim() : parseFloat(value.trim());\n        }\n      });\n      return userDetailsObject;\n    },\n    slotTime() {\n      const slot = this.userDetails[\"Slot Name\"] || '';\n      const formattedSlot = this.formatTime(slot);\n      return formattedSlot;\n    },\n    adultsCount() {\n      return this.userDetails.Teachers || this.userDetails.Adults || 0;\n    },\n    childrenCount() {\n      return this.userDetails.Students || this.userDetails.Children || 0;\n    },\n    seniorCount() {\n      return this.userDetails.Seniors || 0;\n    }\n  }\n};","map":{"version":3,"names":["html2pdf","data","downloading","resendTimeout","resendCountdown","methods","startResendTimer","interval","setInterval","clearInterval","download","ticketElement","$refs","ticket","style","margin","display","options","filename","userDetails","image","type","quality","html2canvas","scale","jsPDF","format","orientation","from","set","save","formatTime","time","hours","minutes","split","formattedHours","parseInt","formattedTime","mounted","computed","qrdetails","$store","getters","getQR","userDetailsString","userDetailsArray","userDetailsObject","forEach","detail","key","value","trim","isNaN","parseFloat","slotTime","slot","formattedSlot","adultsCount","Teachers","Adults","childrenCount","Students","Children","seniorCount","Seniors"],"sources":["D:\\Documents\\ticket-booking\\Museum-completed\\src\\components\\TicketPage.vue"],"sourcesContent":["<template>\r\n  <div class=\"d-flex justify-content-center px-md-5 flex-wrap py-3\">\r\n    <v-card flat class=\" d-flex flex-column justify-content-center rounded-5 \" max-width=\"500\">\r\n      <v-card-item>\r\n        <v-card-title class=\"d-flex align-items-center justify-content-center\">\r\n          <h2 class=\"text-center mt-2 text-green-darken-3\">Congratulation!</h2>\r\n          <v-icon class=\"mdi mdi-party-popper ms-3\" size=\"x-large\" color=\"green-darken-3\"></v-icon>\r\n        </v-card-title>\r\n        <v-card-text class=\"text-center\">\r\n          <h5 class=\"text-center \">You have successfully booked your tickets.</h5>\r\n          <p>Get ready for an unforgettable experience at Aksharam Museum! Explore our latest exhibitions and\r\n            immerse yourself in the history of language.</p>\r\n          <h6 class=\"text-center text-danger my-0\">Take a screenshot or download your QR ticket and remember to bring it\r\n            along\r\n            when you visit.</h6>\r\n          <h5 class=\"text-center text-danger mb-0 mt-0\">Thank You!!</h5>\r\n        </v-card-text>\r\n        <div class=\"d-flex justify-content-center mt-0\" v-if=\"downloading\">\r\n          <v-btn size=\"small\" class=\"mb-3 mt-0 me-2 text-white\"  color=\"green-darken-4\"\r\n            @click=\"download\">Download</v-btn>\r\n          <v-btn size=\"small\" class=\"mb-3 mt-0 me-2 text-white\"  color=\"green-darken-4\"\r\n            @click=\"$router.push('/booking-page')\">Book again</v-btn>\r\n          <v-btn size=\"small\" class=\"mb-3 mt-0 text-white\"  color=\"green-darken-4\"\r\n            @click=\" $router.push('/')\">Home</v-btn>\r\n        </div>\r\n        <div v-else class=\"text-center\">\r\n          <h6>Your download will begin in <span class=\"text-primary fw-normal \"><i>{{ resendCountdown }}\r\n                seconds.</i></span></h6>\r\n        </div>\r\n      </v-card-item>\r\n    </v-card>\r\n    <div class=\"m-ticket mt-4 mb-5 border border-2 \" ref=\"ticket\">\r\n      <div class=\"d-flex pt-2 pb-1 justify-content-center w-100 bg-grey-darken-4\" style=\"background-color: #110b03;\">\r\n        <v-img src=\"@/assets/logo.png\" class=\"me-1 flex-grow-0 \" style=\"height:25px; width:35px\"></v-img>\r\n        <h5 class=\"text-center text-white\">Aksharam Museum</h5>\r\n      </div>\r\n      <p class=\"m\">Aksharam</p>\r\n      <div class=\"movie-details d-flex flex-column align-items-center\">\r\n        <p>{{ adultsCount + childrenCount + seniorCount }} Ticket(s)</p>\r\n        <p class=\"mb-0 mt-0\">Date: {{ userDetails.Date }}</p>\r\n        <p class=\"mb-0\">Slot: {{ slotTime }}</p>\r\n        <p class=\"mb-0\">{{ userDetails.Teachers ? 'Teachers' : 'Adults' }}: {{ adultsCount }}</p>\r\n        <p class=\"mb-0\">{{ userDetails.Students ? 'Students' : 'Children' }}: {{ childrenCount }}</p>\r\n        <p class=\"mb-0\" v-if=\"userDetails.Seniors\">Senior Citizens : {{ seniorCount }}</p>\r\n      </div>\r\n      <div class=\"info\">\r\n        <v-divider></v-divider>\r\n      </div>\r\n      <div class=\"ticket-details mt-1 d-flex flex-column align-items-center\">\r\n        <p class=\"m-0\">{{ adultsCount + childrenCount + seniorCount }} Ticket(s)</p>\r\n        <v-img id=\"qr-code\" :src=\"'data:image/png;base64,' + qrdetails.qrCodeImage\" alt=\"QR Code\" class=\"scan\"></v-img>\r\n        <h6 class=\"pb-2\">{{ userDetails[\"Booking ID\"] }}</h6>\r\n      </div>\r\n      <p class=\"m m1\">Aksharam</p>\r\n      <div class=\"info-cancel bg-dark-subtle \">\r\n        Cancellation not available\r\n      </div>\r\n      <div class=\"total-amount\">\r\n        <p>Total Amount:</p>\r\n        <p>Rs.{{ userDetails.Amount }}/-</p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport html2pdf from 'html2pdf.js'\r\nexport default {\r\n  data() {\r\n    return {\r\n      downloading: false,\r\n      resendTimeout: null,\r\n      resendCountdown: 5,\r\n    };\r\n  },\r\n  methods: {\r\n    startResendTimer() {\r\n      const interval = setInterval(() => {\r\n        if (this.resendCountdown > 0) {\r\n          this.resendCountdown--;\r\n        } else {\r\n          clearInterval(interval); \r\n          this.download(); \r\n          this.downloading = true;\r\n        }\r\n      }, 1000);\r\n    },\r\n    download() {\r\n      const ticketElement = this.$refs.ticket;\r\n      ticketElement.style.margin = 'auto';\r\n      ticketElement.style.display = 'block';\r\n      const options = {\r\n        margin: 30,\r\n        filename: `aksharam_${this.userDetails[\"Booking ID\"]}.pdf`,\r\n        image: { type: 'png', quality: 1 },\r\n        html2canvas: { scale: 2 },\r\n        jsPDF: { format: 'A5', orientation: 'portrait' }\r\n      };\r\n\r\n      html2pdf().from(ticketElement).set(options).save();\r\n    },\r\n    formatTime(time) {\r\n      const [hours, minutes] = time.split(':');\r\n      let formattedHours = parseInt(hours, 10) % 12;\r\n      formattedHours = formattedHours === 0 ? 12 : formattedHours;\r\n      const formattedTime = `${formattedHours}:${minutes} ${hours < 12 ? 'am' : 'pm'}`;\r\n      return formattedTime;\r\n    }\r\n  },\r\n  mounted() {\r\n    this.startResendTimer();\r\n\r\n  },\r\n\r\ncomputed: {\r\n   qrdetails(){\r\n     return this.$store.getters.getQR || {};\r\n   },\r\n \r\n  userDetails() {\r\n    const userDetailsString = this.qrdetails.userDetails || '';\r\n    const userDetailsArray = userDetailsString.split(', ');\r\n    const userDetailsObject = {};\r\n    userDetailsArray.forEach((detail) => {\r\n      if (detail) {\r\n        const [key, value] = detail.split(': ');\r\n        userDetailsObject[key.trim()] = isNaN(value) ? value.trim() : parseFloat(value.trim());\r\n      }\r\n      });\r\n  \r\n      return userDetailsObject;\r\n  },\r\n  slotTime() {\r\n    const slot = this.userDetails[\"Slot Name\"] || '';\r\n    const formattedSlot = this.formatTime(slot);\r\n    return formattedSlot;\r\n  },\r\n    adultsCount() {\r\n      return this.userDetails.Teachers || this.userDetails.Adults || 0;\r\n    },\r\n    childrenCount() {\r\n      return this.userDetails.Students || this.userDetails.Children || 0;\r\n    },\r\n    seniorCount() {\r\n      return this.userDetails.Seniors || 0;\r\n    },\r\n  }\r\n}\r\n\r\n</script>\r\n\r\n<style scoped>\r\n.m-ticket{\r\n  width:280px;\r\n  background:#fff;\r\n  border-radius:12px;\r\n  overflow:hidden;\r\n  box-shadow:0 0 25px #bbb;\r\n  display:flex;\r\n  flex-direction:column;\r\n  align-items:center;\r\n  position:relative;\r\n  cursor:pointer;\r\n  width: clamp(260px, 80%, 280px);\r\n}\r\n.m-ticket:before{\r\n  content:\"\";\r\n  position:absolute;\r\n  left:-10px;\r\n  top:41%;\r\n  background:#eee;\r\n  box-shadow:inset 0 0 25px #bbb;\r\n  width:17px;\r\n  height:17px;\r\n  border-radius:50%;\r\n}\r\n.m-ticket:after{\r\n  content:\"\";\r\n  position:absolute;\r\n  right:-10px;\r\n  top:41%;\r\n  background:#eee;\r\n  box-shadow:inset 0 0 25px #bbb;\r\n  width:17px;\r\n  height:17px;\r\n  border-radius:50%;\r\n}\r\n.m{\r\n  position:absolute;\r\n  right:-5px;\r\n  top:18%;\r\n  transform:rotate(270.5deg);\r\n  font-size:.80em;\r\n  color:#888;\r\n}\r\n.m1{\r\n  right:-5px;\r\n  top:58%;\r\n}\r\n.m-ticket > .movie-details{\r\n  padding:10px 20px; \r\n  font-size:.90em;\r\n  line-height:19px;\r\n  height: 140px;\r\n}\r\n.m-ticket > .movie-details> p{\r\n  margin: 5px;\r\n}\r\n.m-ticket > .info{\r\n  width:100%;\r\n  background:transparent;\r\n  text-align:justify;\r\n  font-size:.72em;\r\n}\r\n.m-ticket > .ticket-details > .scan{\r\n  width:100px;\r\n  height:100px;\r\n}\r\n.m-ticket > .ticket-details > p{\r\n  font-size:.90em;\r\n  line-height:19px;\r\n  color:#777;\r\n}\r\n.m-ticket > .info-cancel{\r\n  width:100%;\r\n  background:#eee;\r\n  color:#888;\r\n  padding:10px 0px;\r\n  text-align:center;\r\n  font-size:.80em;\r\n}\r\n.m-ticket > .total-amount{\r\n  display:flex;\r\n  justify-content:space-between;\r\n  padding:12px 20px;\r\n  font-weight:700;\r\n  font-size:.90em;\r\n  width:100%;\r\n}\r\n\r\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}